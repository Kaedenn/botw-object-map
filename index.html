<html>
	<head>
		<title>Breath of the Wild Object Map</title>
		<script src='jquery-1.12.0.min.js'></script>
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
		<style>
		#botw_map {
			display: inline-block;
			height: 99%;
			width: 70%;
		}
		#sidebar {
			display: inline-block;
			height: 99%;
			width: 29%;
			overflow: scroll;
			white-space: nowrap;
		}
		.div-icon0 { border-radius: 50%; border: 1px solid #00FFFF; }
		.div-icon1 { border-radius: 50%; border: 1px solid #FFFF00; }
		.div-icon2 { border-radius: 50%; border: 1px solid #FF00FF; }
		.div-icon3 { border-radius: 50%; border: 1px solid #FF6060; }
		.div-icon4 { border-radius: 50%; border: 1px solid #60FF60; }
		.div-icon5 { border-radius: 50%; border: 1px solid #6060FF; }
		.div-icon6 { border-radius: 50%; border: 1px solid #40C0FF; }
		.div-icon7 { border-radius: 50%; border: 1px solid #C0FF40; }
		.div-icon8 { border-radius: 50%; border: 1px solid #FF40C0; }
		.div-icon9 { border-radius: 50%; border: 1px solid #FFC040; }
		.div-icon10 { border-radius: 50%; border: 1px solid #40FFC0; }
		.div-icon11 { border-radius: 50%; border: 1px solid #C040FF; }
		</style>
	</head>
	<body>
		<div id="botw_map"></div>
		<div id="sidebar"></div>
		<div>Note that many objects are dynamically generated and are not included in this data.</div>
		<script src="map_locations.js"></script>
		<script>
			var presets = {"AttackUp":["Animal_Insect_G", "Item_Plant_G", "Item_Fruit_H", "TBox_Field_Stone:Item_Fruit_H", "Item_Mushroom_L",
									   "Kibako_Contain_01:Item_Mushroom_L", "Animal_Fish_E", "Item_FishGet_E", "Animal_Insect_K", "Obj_LiftRockWhite_A_01:Animal_Insect_K", "Animal_Fish_F"],
						   "MovingSpeed":["Animal_Insect_S", "Obj_LiftRockWhite_A_01:Animal_Insect_S", "Item_MushroomGet_D", "Item_Mushroom_D", "Item_PlantGet_M",
										  "Item_Plant_M", "Animal_Insect_A", "Obj_LiftRockWhite_A_01:Animal_Insect_A", "Item_Plant_O", "Item_Fruit_E",
										  "Obj_Plant_Lotus_A_01","Obj_Plant_Lotus_A_02","Obj_Plant_Lotus_A_03"],
						   "Fireproof":["Animal_Insect_X", "Obj_LiftRockEldin_A_01:Animal_Insect_X"],
						   "Nothing":[]};
			
			var map = L.map('botw_map', {
				minZoom: 1,
				maxZoom: 8,
				center: [0, 0],
				zoom: 1,
				crs: L.CRS.Simple
			});
			var southWest = map.unproject([0, 8*5000], map.getMaxZoom()-1);
			var northEast = map.unproject([8*6000, 0], map.getMaxZoom()-1);
			var bounds = new L.LatLngBounds(southWest, northEast);
			L.imageOverlay('BotW-Map.png', bounds).addTo(map);
			map.setMaxBounds(bounds);
			
			var object_display_names = {};
			for (var i=0; i<locations.length; i++) {
				object_display_names[locations[i].internal_name] = locations[i].display_name;
			}
			var object_internal_names = Object.keys(object_display_names);
			object_internal_names.sort();
			for (var i=0; i<object_internal_names.length; i++) {
				var internal_name = object_internal_names[i];
				var display_name = object_display_names[internal_name];
				if (internal_name == display_name) {
					$('#sidebar').append('<div><input type="checkbox" name="'+internal_name+'"/>'+internal_name+'</div>');
				} else {
					$('#sidebar').append('<div><input type="checkbox" name="'+internal_name+'"/>'+display_name+' -- '+internal_name+'</div>');
				}
			}
			
			var icons = [L.divIcon({className: 'div-icon0'}),
						 L.divIcon({className: 'div-icon1'}),
						 L.divIcon({className: 'div-icon2'}),
						 L.divIcon({className: 'div-icon3'}),
						 L.divIcon({className: 'div-icon4'}),
						 L.divIcon({className: 'div-icon5'}),
						 L.divIcon({className: 'div-icon6'}),
						 L.divIcon({className: 'div-icon7'}),
						 L.divIcon({className: 'div-icon8'}),
						 L.divIcon({className: 'div-icon9'}),
						 L.divIcon({className: 'div-icon10'}),
						 L.divIcon({className: 'div-icon11'})];
						 
			var markers = {};
			var names = [];
			
			$('input').change(function () {
			
				if ($(this).is(':checked')) {
					
					if (names.indexOf(this.name) < 0) {
						names.push(this.name);
					}
					
					markers[this.name] = [];
					for (var i=0; i<locations.length; i++) {
						if (locations[i].internal_name == this.name) {
							var coords = map.unproject([8*3000+4*locations[i].x, 8*2500+4*locations[i].y], map.getMaxZoom()-1);
							var name_str;
							if (this.name == locations[i].display_name) {
								name_str = this.name;
							} else {
								name_str = locations[i].display_name + ' -- ' + this.name;
							}
							markers[this.name].push(L.marker(coords, {icon: icons[names.indexOf(this.name) % 12], title:name_str}).addTo(map));
						}
					}
				} else {
					if (markers[this.name] != undefined) {
						for (var i=0; i<markers[this.name].length; i++) {
							map.removeLayer(markers[this.name][i]);
						}
						markers[this.name] = undefined;
					}
				}
			});
			
			var preset_names = Object.keys(presets);
			for (var i=0; i<preset_names.length; i++) {
				$('body').append('<div><a href="javascript:showPreset(\''+preset_names[i]+'\')">Preset: '+preset_names[i]+'</div>');
			}
			
			function showPreset(name) {
				$('input:checked').prop('checked', false).trigger("change");
				for (var i=0; i<presets[name].length; i++) {
					$('input[name="'+presets[name][i]+'"]').prop('checked', true).trigger("change");
				}
			};
			
			function showNear(x, y) {
				for (var i=0; i<locations.length; i++) {
					if (Math.abs(locations[i].x - x) < 100 && Math.abs(locations[i].y - y) < 100) {
						var coords = map.unproject([8*3000+4*locations[i].x, 8*2500+4*locations[i].y], map.getMaxZoom()-1);
						var name_str;
						if (locations[i].internal_name == locations[i].display_name) {
							name_str = locations[i].internal_name;
						} else {
							name_str = locations[i].display_name + ' -- ' + locations[i].internal_name;
						}
						L.marker(coords, {icon: icons[object_internal_names.indexOf(locations[i].internal_name) % 12], title:name_str}).addTo(map);
					}
				}
			}
		</script>
	</body>
</html>